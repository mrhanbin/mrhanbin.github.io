<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>玩转html5 的 canvas画图 | 韩斌的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="canvas是html5出现的新标签，像所有的dom对象一样它有自己本身的属性、方法和事件，其中就有绘图的方法，js能够调用它来进行绘图 ，最近在研读《html5与css3权威指南》下面对其中最好玩的canvas的学习做下读书笔记与实验。">
<meta name="keywords" content="html5,canvas">
<meta property="og:type" content="article">
<meta property="og:title" content="玩转html5 的 canvas画图">
<meta property="og:url" content="http://soos.xin/2015/02/25/玩转html5 的 canvas画图/index.html">
<meta property="og:site_name" content="韩斌的博客">
<meta property="og:description" content="canvas是html5出现的新标签，像所有的dom对象一样它有自己本身的属性、方法和事件，其中就有绘图的方法，js能够调用它来进行绘图 ，最近在研读《html5与css3权威指南》下面对其中最好玩的canvas的学习做下读书笔记与实验。">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://www.uml.org.cn/html/images/2012082241.jpg">
<meta property="og:image" content="http://www.uml.org.cn/html/images/2012082242.jpg">
<meta property="og:image" content="http://www.uml.org.cn/html/images/2012082243.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/2012082244.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/2012082245.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/2012082246.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/2012082247.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/2012082248.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/2012082249.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822410.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822411.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822412.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822413.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822414.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822415.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822416.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822417.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822418.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822419.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822420.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822421.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822422.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822423.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822424.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822425.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822426.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822427.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822428.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822429.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822430.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822431.png">
<meta property="og:image" content="http://www.uml.org.cn/html/images/20120822432.png">
<meta property="og:updated_time" content="2017-09-04T09:59:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="玩转html5 的 canvas画图">
<meta name="twitter:description" content="canvas是html5出现的新标签，像所有的dom对象一样它有自己本身的属性、方法和事件，其中就有绘图的方法，js能够调用它来进行绘图 ，最近在研读《html5与css3权威指南》下面对其中最好玩的canvas的学习做下读书笔记与实验。">
<meta name="twitter:image" content="http://www.uml.org.cn/html/images/2012082241.jpg">
  
    <link rel="alternative" href="/atom.xml" title="韩斌的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet">
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head></html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/head.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">韩斌</a></h1>
        </hgroup>

        
        <p class="header-subtitle">每一秒 我们都有机会 让下一秒 变得更好</p>
        
        
            <form>
                <input type="text" class="st-default-search-input search" id="search" placeholder=" Search...">
            </form>
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/Home">博客首页</a></li>
                        
                            <li><a href="/works">作品展示</a></li>
                        
                            <li><a href="/about">留言打卡</a></li>
                        
                            <li><a href="/FrontEndGuide">前端导航</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=kaOooaeopqSh0eDgv-L_-A" title="mail">mail</a>
                            
                                <a class="fl zhihu" target="_blank" href="http://zhihu.com/people/hanbinsvip" title="zhihu">zhihu</a>
                            
                                <a class="fl weibo" target="_blank" href="http://weibo.com/aaronindex" title="weibo">weibo</a>
                            
                                <a class="fl QQ" target="_blank" href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=29069750&website=www.soos.xin" title="QQ">QQ</a>
                            
                                <a class="fl wechat" target="_blank" href="https://zhuanlan.zhihu.com/p/29545000" title="wechat">wechat</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/CSS3/" style="font-size: 10px;">CSS3</a> <a href="/tags/HTML5/" style="font-size: 10px;">HTML5</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/JQuery/" style="font-size: 10px;">JQuery</a> <a href="/tags/JS/" style="font-size: 10px;">JS</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/WebSocket/" style="font-size: 12.5px;">WebSocket</a> <a href="/tags/WebStorage/" style="font-size: 10px;">WebStorage</a> <a href="/tags/ajax/" style="font-size: 10px;">ajax</a> <a href="/tags/canvas/" style="font-size: 10px;">canvas</a> <a href="/tags/cookie/" style="font-size: 10px;">cookie</a> <a href="/tags/css3/" style="font-size: 10px;">css3</a> <a href="/tags/gulp/" style="font-size: 12.5px;">gulp</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/html5/" style="font-size: 12.5px;">html5</a> <a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/java/" style="font-size: 17.5px;">java</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/jquery/" style="font-size: 15px;">jquery</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/js、css混淆/" style="font-size: 10px;">js、css混淆</a> <a href="/tags/js、css版本号/" style="font-size: 10px;">js、css版本号</a> <a href="/tags/nodejs/" style="font-size: 12.5px;">nodejs</a> <a href="/tags/spring/" style="font-size: 10px;">spring</a> <a href="/tags/web前端/" style="font-size: 12.5px;">web前端</a> <a href="/tags/兼容性/" style="font-size: 10px;">兼容性</a> <a href="/tags/博客/" style="font-size: 10px;">博客</a> <a href="/tags/建站/" style="font-size: 10px;">建站</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://bio.soos.xin/">我的简历</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">热衷于新技术的学习和研究；秉承化繁为简理念，对互联网发展趋势高度关注，积极配合团队开发。</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">韩斌</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">韩斌</a></h1>
            </hgroup>
            
            <p class="header-subtitle">每一秒 我们都有机会 让下一秒 变得更好</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/Home">博客首页</a></li>
                
                    <li><a href="/works">作品展示</a></li>
                
                    <li><a href="/about">留言打卡</a></li>
                
                    <li><a href="/FrontEndGuide">前端导航</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=kaOooaeopqSh0eDgv-L_-A" title="mail">mail</a>
                    
                        <a class="zhihu" target="_blank" href="http://zhihu.com/people/hanbinsvip" title="zhihu">zhihu</a>
                    
                        <a class="weibo" target="_blank" href="http://weibo.com/aaronindex" title="weibo">weibo</a>
                    
                        <a class="QQ" target="_blank" href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=29069750&website=www.soos.xin" title="QQ">QQ</a>
                    
                        <a class="wechat" target="_blank" href="https://zhuanlan.zhihu.com/p/29545000" title="wechat">wechat</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-玩转html5 的 canvas画图" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/02/25/玩转html5 的 canvas画图/" class="article-date">
      <time datetime="2015-02-25T10:29:00.000Z" itemprop="datePublished">2015-02-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      玩转html5 的 canvas画图
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/web前端/">web前端</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html5/">html5</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><code>&lt;canvas&gt;&lt;/canvas&gt;</code>是html5出现的新标签，像所有的dom对象一样它有自己本身的属性、方法和事件，其中就有绘图的方法，js能够调用它来进行绘图 ，最近在研读《html5与css3权威指南》下面对其中最好玩的canvas的学习做下读书笔记与实验。<br>温馨提示：以下所有实验请使用最新版的opera</p>
<hr>
<h2 id="基本知识"><a href="#基本知识" class="headerlink" title="基本知识"></a>基本知识</h2><hr>
<p><code>context</code>:一直觉得这个翻译成“上下文”真够蛋疼的，context是一个封装了很多绘图功能的对象，获取这个对象的方法是 </p>
<p><code>var context =canvas.getContext(&quot;2d&quot;);</code></p>
<p>也许这个2d勾起了大家的无限遐想，但是很遗憾的告诉你html5还只是个少女，不提供3d服务。</p>
<p>canvas元素绘制图像的时候有两种方法，分别是</p>
<p><code>context.fill()</code>//填充</p>
<p><code>context.stroke()</code>//绘制边框</p>
<p><code>style</code>:在进行图形绘制前，要设置好绘图的样式</p>
<p><code>context.fillStyle</code>//填充的样式</p>
<p><code>context.strokeStyle</code>//边框样式</p>
<p><code>context.lineWidth</code>//图形边框宽度</p>
<p>颜色的表示方式:</p>
<p>直接用颜色名称:<code>&quot;red&quot; &quot;green&quot; &quot;blue&quot;</code><br>十六进制颜色值: <code>&quot;#EEEEFF&quot;</code><br><code>rgb(1-255,1-255,1-255)    rgba(1-255,1-255,1-255,透明度)</code><br>和GDI是如此的相像，所以用过GDI的朋友应该很快就能上手</p>
<hr>
<h2 id="绘制矩形-context-fillRect-x-y-width-height-strokeRect-x-y-width-height"><a href="#绘制矩形-context-fillRect-x-y-width-height-strokeRect-x-y-width-height" class="headerlink" title="绘制矩形 context.fillRect(x,y,width,height) strokeRect(x,y,width,height)"></a>绘制矩形 context.fillRect(x,y,width,height) strokeRect(x,y,width,height)</h2><hr>
<p><code>x</code>:矩形起点横坐标（坐标原点为canvas的左上角，当然确切的来说是原始原点，后面写到变形的时候你就懂了，现在暂时不用关系）</p>
<p><code>y</code>:矩形起点纵坐标</p>
<p><code>width</code>:矩形长度</p>
<p><code>height</code>:矩形高度<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw21</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id)</span><br><span class="line">     <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">     <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">     <span class="comment">//实践表明在不设施fillStyle下的默认fillStyle=black</span></span><br><span class="line">     context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">     <span class="comment">//实践表明在不设施strokeStyle下的默认strokeStyle=black</span></span><br><span class="line">     context.strokeRect(<span class="number">120</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"> </span><br><span class="line">     <span class="comment">//设置纯色</span></span><br><span class="line">     context.fillStyle = <span class="string">"red"</span>;</span><br><span class="line">     context.strokeStyle = <span class="string">"blue"</span>;</span><br><span class="line">     context.fillRect(<span class="number">0</span>, <span class="number">120</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">     context.strokeRect(<span class="number">120</span>, <span class="number">120</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"> </span><br><span class="line">     <span class="comment">//设置透明度实践证明透明度值&gt;0,&lt;1值越低，越透明，值&gt;=1时为纯色，值&lt;=0时为完全透明</span></span><br><span class="line">     context.fillStyle = <span class="string">"rgba(255,0,0,0.2)"</span>;</span><br><span class="line">     context.strokeStyle = <span class="string">"rgba(255,0,0,0.2)"</span>;</span><br><span class="line">     context.fillRect(<span class="number">240</span>,<span class="number">0</span> , <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">     context.strokeRect(<span class="number">240</span>, <span class="number">120</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="http://www.uml.org.cn/html/images/2012082241.jpg" alt="image"></p>
<hr>
<h2 id="清除矩形区域-context-clearRect-x-y-width-height"><a href="#清除矩形区域-context-clearRect-x-y-width-height" class="headerlink" title="清除矩形区域 context.clearRect(x,y,width,height)"></a>清除矩形区域 context.clearRect(x,y,width,height)</h2><hr>
<p><code>x</code>:清除矩形起点横坐标</p>
<p><code>y</code>:清除矩形起点纵坐标</p>
<p><code>width</code>:清除矩形长度</p>
<p><code>height</code>:清除矩形高度</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw22</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id)</span><br><span class="line">     <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">     <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">     <span class="comment">//实践表明在不设施fillStyle下的默认fillStyle=black</span></span><br><span class="line">     context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">     <span class="comment">//实践表明在不设施strokeStyle下的默认strokeStyle=black</span></span><br><span class="line">     context.strokeRect(<span class="number">120</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"> </span><br><span class="line">     <span class="comment">//设置纯色</span></span><br><span class="line">     context.fillStyle = <span class="string">"red"</span>;</span><br><span class="line">     context.strokeStyle = <span class="string">"blue"</span>;</span><br><span class="line">     context.fillRect(<span class="number">0</span>, <span class="number">120</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">     context.strokeRect(<span class="number">120</span>, <span class="number">120</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"> </span><br><span class="line">     <span class="comment">//设置透明度实践证明透明度值&gt;0,&lt;1值越低，越透明，值&gt;=1时为纯色，值&lt;=0时为完全透明</span></span><br><span class="line">     context.fillStyle = <span class="string">"rgba(255,0,0,0.2)"</span>;</span><br><span class="line">     context.strokeStyle = <span class="string">"rgba(255,0,0,0.2)"</span>;</span><br><span class="line">     context.fillRect(<span class="number">240</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">     context.strokeRect(<span class="number">240</span>, <span class="number">120</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">     context.clearRect(<span class="number">50</span>, <span class="number">50</span>, <span class="number">240</span>, <span class="number">120</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/2012082242.jpg" alt="image"></p>
<hr>
<h2 id="圆弧context-arc-x-y-radius-starAngle-endAngle-anticlockwise"><a href="#圆弧context-arc-x-y-radius-starAngle-endAngle-anticlockwise" class="headerlink" title="圆弧context.arc(x, y, radius, starAngle,endAngle, anticlockwise)"></a>圆弧context.arc(x, y, radius, starAngle,endAngle, anticlockwise)</h2><hr>
<p><code>x</code>:圆心的x坐标</p>
<p><code>y</code>:圆心的y坐标</p>
<p><code>straAngle</code>:开始角度</p>
<p><code>endAngle</code>:结束角度</p>
<p><code>anticlockwise</code>:是否逆时针（true）为逆时针，(false)为顺时针</p>
<p>ps：经过试验证明书本上ture是顺时针，false是逆时针是错误的，而且无论是逆时针还是顺时针，角度都沿着顺时针扩大，如下图：<br><img src="http://www.uml.org.cn/html/images/2012082243.png" alt="image"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw0</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">	<span class="keyword">if</span> (canvas == <span class="literal">null</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">	context.beginPath();</span><br><span class="line">	context.arc(<span class="number">200</span>, <span class="number">150</span>, <span class="number">100</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">	<span class="comment">//不关闭路径路径会一直保留下去，当然也可以利用这个特点做出意想不到的效果</span></span><br><span class="line">	context.closePath();</span><br><span class="line">	context.fillStyle = <span class="string">'rgba(0,255,0,0.25)'</span>;</span><br><span class="line">	context.fill();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一不小心画了小日本的国旗…赶紧调下颜色和大小，绿色倒是挺合适的~<br><img src="http://www.uml.org.cn/html/images/2012082244.png" alt="image"></p>
<hr>
<h2 id="路径-context-beginPath-context-closePath"><a href="#路径-context-beginPath-context-closePath" class="headerlink" title="路径 context.beginPath() context.closePath()"></a>路径 context.beginPath() context.closePath()</h2><hr>
<p>细心的朋友会发现上面的画圆并不单单是直接用arc还用到了<code>context</code>的 <code>beginPath</code> 和<code>closePath</code>方法，参考书不愧是参考书，例子给得太简单了，实话说一开始我凌乱了，耐心下来做了几个实验才舒缓蛋疼的心情</p>
<p>实验代码如下，通过分别注释<code>closePath</code> 和<code>beginPath</code>看<code>fill stoke</code> 和<code>fill stroke</code>结合下画出来的两个1/4弧线达到实验效果<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw23</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">      <span class="keyword">if</span> (canvas == <span class="literal">null</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">      <span class="keyword">var</span> n = <span class="number">0</span>;</span><br><span class="line">     </span><br><span class="line">      <span class="comment">//左侧1/4圆弧</span></span><br><span class="line">      context.beginPath();</span><br><span class="line">      context.arc(<span class="number">100</span>, <span class="number">150</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI/<span class="number">2</span> , <span class="literal">false</span>);</span><br><span class="line">      context.fillStyle = <span class="string">'rgba(255,0,0,0.25)'</span>;</span><br><span class="line">      context.fill();</span><br><span class="line">      context.strokeStyle = <span class="string">'rgba(255,0,0,0.25)'</span></span><br><span class="line">      context.closePath();</span><br><span class="line">      context.stroke();</span><br><span class="line"> </span><br><span class="line">      <span class="comment">//右侧1/4圆弧</span></span><br><span class="line">      context.beginPath();</span><br><span class="line">      context.arc(<span class="number">300</span>, <span class="number">150</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI/<span class="number">2</span> , <span class="literal">false</span>);</span><br><span class="line">      context.fillStyle = <span class="string">'rgba(255,0,0,0.25)'</span>;</span><br><span class="line">      context.fill();</span><br><span class="line">      context.strokeStyle = <span class="string">'rgba(255,0,0,0.25)'</span>;</span><br><span class="line">      context.closePath();</span><br><span class="line">      context.stroke();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p>实验结果如下：<br><img src="http://www.uml.org.cn/html/images/2012082245.png" alt="image"></p>
<p>得出的结论有：*号为重点</p>
<p>1、系统默认在绘制第一个路径的开始点为<code>beginPath</code></p>
<p>*2、如果画完前面的路径没有重新指定<code>beginPath</code>那么画第其他路径的时候会将前面最近指定的<code>beginPath</code>后的全部路径重新绘制</p>
<p>3、每次调用<code>context.fill（）</code>的时候会自动把当次绘制的路径的开始点和结束点相连，接着填充封闭的部分</p>
<p>ps：书本的结论是 如果没有<code>closePath</code>那么前面的路劲会保留，实验证明正确的结论是 如果没有重新<code>beginPath</code>那么前面的路劲会保留</p>
<p>ps1：如果你真心凌乱了，那么记住每次画路径都在前后加<code>context.beginPath()</code>和<code>context.closePath()</code>就行</p>
<hr>
<h2 id="绘制线段-context-moveTo-x-y-context-lineTo-x-y"><a href="#绘制线段-context-moveTo-x-y-context-lineTo-x-y" class="headerlink" title="绘制线段 context.moveTo(x,y) context.lineTo(x,y)"></a>绘制线段 <code>context.moveTo(x,y) context.lineTo(x,y)</code></h2><hr>
<p><code>x</code>:x坐标</p>
<p><code>y</code>:y坐标</p>
<p>每次画线都从moveTo的点到lineTo的点，</p>
<p>如果没有moveTo那么第一次lineTo的效果和moveTo一样，</p>
<p>每次lineTo后如果没有moveTo，那么下次lineTo的开始点为前一次lineTo的结束点</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw8</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">       <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">       <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">       <span class="comment">//context.beginPath();</span></span><br><span class="line">       context.strokeStyle = <span class="string">"rgb(250,0,0)"</span>;</span><br><span class="line">       context.fillStyle = <span class="string">"rgb(250,0,0)"</span></span><br><span class="line">       <span class="comment">//实验证明第一次lineTo的时候和moveTo功能一样</span></span><br><span class="line">       context.lineTo(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">       <span class="comment">//之后的lineTo会以上次lineTo的节点为开始</span></span><br><span class="line">       context.lineTo(<span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">       context.lineTo(<span class="number">200</span>, <span class="number">100</span>);</span><br><span class="line">       context.moveTo(<span class="number">200</span>, <span class="number">50</span>);</span><br><span class="line">       context.lineTo(<span class="number">100</span>,<span class="number">50</span>);</span><br><span class="line">       context.stroke();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/2012082246.png" alt="image"></p>
<p>下面给出书本的例子，一朵绿色的菊花，涉及数学，不多解析，有兴趣的自己研究</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw1</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">      <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">      context.fillStyle = <span class="string">"#EEEEFF"</span>;</span><br><span class="line">      context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">      <span class="keyword">var</span> n = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">var</span> dx = <span class="number">150</span>;</span><br><span class="line">      <span class="keyword">var</span> dy = <span class="number">150</span>;</span><br><span class="line">      <span class="keyword">var</span> s = <span class="number">100</span>;</span><br><span class="line">      context.beginPath();</span><br><span class="line">      context.fillStyle = <span class="string">'rgb(100,255,100)'</span>;</span><br><span class="line">      context.strokeStyle = <span class="string">'rgb(0,0,100)'</span>;</span><br><span class="line">      <span class="keyword">var</span> x = <span class="built_in">Math</span>.sin(<span class="number">0</span>);</span><br><span class="line">      <span class="keyword">var</span> y = <span class="built_in">Math</span>.cos(<span class="number">0</span>);</span><br><span class="line">      <span class="keyword">var</span> dig = <span class="built_in">Math</span>.PI / <span class="number">15</span> * <span class="number">11</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">          <span class="keyword">var</span> x = <span class="built_in">Math</span>.sin(i * dig);</span><br><span class="line">          <span class="keyword">var</span> y = <span class="built_in">Math</span>.cos(i * dig);</span><br><span class="line">          context.lineTo(dx + x * s, dy + y * s);</span><br><span class="line">      &#125;</span><br><span class="line">      context.closePath();</span><br><span class="line">      context.fill();</span><br><span class="line">      context.stroke();</span><br><span class="line"> </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/2012082247.png" alt="image"></p>
<hr>
<h2 id="绘制贝塞尔曲线（贝济埃、bezier）-context-bezierCurveTo-cp1x-cp1y-cp2x-cp2y-x-y"><a href="#绘制贝塞尔曲线（贝济埃、bezier）-context-bezierCurveTo-cp1x-cp1y-cp2x-cp2y-x-y" class="headerlink" title="绘制贝塞尔曲线（贝济埃、bezier） context.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y)"></a>绘制贝塞尔曲线（贝济埃、bezier） context.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y)</h2><hr>
<p>绘制二次样条曲线 <code>context.quadraticCurveTo(qcpx,qcpy,qx,qy)</code></p>
<p>cp1x:第一个控制点x坐标</p>
<p>cp1y:第一个控制点y坐标</p>
<p>cp2x:第二个控制点x坐标</p>
<p>cp2y:第二个控制点y坐标</p>
<p>x:终点x坐标</p>
<p>y:终点y坐标</p>
<p>qcpx:二次样条曲线控制点x坐标</p>
<p>qcpy:二次样条曲线控制点y坐标</p>
<p>qx:二次样条曲线终点x坐标</p>
<p>qy:二次样条曲线终点y坐标</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw24</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line"> </span><br><span class="line">    context.moveTo(<span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">    context.bezierCurveTo(<span class="number">50</span>, <span class="number">50</span>,<span class="number">150</span>, <span class="number">50</span>, <span class="number">150</span>, <span class="number">150</span>);</span><br><span class="line">    context.stroke();</span><br><span class="line">    context.quadraticCurveTo(<span class="number">150</span>, <span class="number">250</span>, <span class="number">250</span>, <span class="number">250</span>);</span><br><span class="line">    context.stroke();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/2012082248.png" alt="image"></p>
<p>下面给出书本的例子，一朵扭曲的绿色菊花…编书这哥们对菊花情有独钟啊- -</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw2</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    context.fillStyle = <span class="string">"#EEEFF"</span>;</span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">    <span class="keyword">var</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> dx = <span class="number">150</span>;</span><br><span class="line">    <span class="keyword">var</span> dy = <span class="number">150</span>;</span><br><span class="line">    <span class="keyword">var</span> s = <span class="number">100</span>;</span><br><span class="line">    context.beginPath();</span><br><span class="line">    context.globalCompositeOperation = <span class="string">'and'</span>;</span><br><span class="line">    context.fillStyle = <span class="string">'rgb(100,255,100)'</span>;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="built_in">Math</span>.sin(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">var</span> y = <span class="built_in">Math</span>.cos(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">var</span> dig = <span class="built_in">Math</span>.PI / <span class="number">15</span> * <span class="number">11</span>;</span><br><span class="line">    context.moveTo(dx, dy);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> x = <span class="built_in">Math</span>.sin(i * dig);</span><br><span class="line">        <span class="keyword">var</span> y = <span class="built_in">Math</span>.cos(i * dig);</span><br><span class="line">        context.bezierCurveTo(dx + x * s, dy + y * s - <span class="number">100</span>, dx + x * s + <span class="number">100</span>, dy + y * s, dx + x * s, </span><br><span class="line">         dy + y * s);</span><br><span class="line">    &#125;</span><br><span class="line">    context.closePath();</span><br><span class="line">    context.fill();</span><br><span class="line">    context.stroke();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/2012082249.png" alt="image"></p>
<hr>
<h2 id="线性渐变-var-lg-context-createLinearGradient-xStart-yStart-xEnd-yEnd"><a href="#线性渐变-var-lg-context-createLinearGradient-xStart-yStart-xEnd-yEnd" class="headerlink" title="线性渐变 var lg= context.createLinearGradient(xStart,yStart,xEnd,yEnd)"></a>线性渐变 var lg= context.createLinearGradient(xStart,yStart,xEnd,yEnd)</h2><hr>
<p>线性渐变颜色lg.addColorStop(offset,color)</p>
<p>xstart:渐变开始点x坐标</p>
<p>ystart:渐变开始点y坐标</p>
<p>xEnd:渐变结束点x坐标</p>
<p>yEnd:渐变结束点y坐标</p>
<p>offset:设定的颜色离渐变结束点的偏移量(0~1)</p>
<p>color:绘制时要使用的颜色</p>
<p>给出书本偏移量的解析图，从图可以看出线性渐变可以是两种以上颜色的渐变</p>
<p><img src="http://www.uml.org.cn/html/images/20120822410.png" alt="image"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">draw25</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line"><span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line"><span class="keyword">var</span> g1 = context.createLinearGradient(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line">      g1.addColorStop(<span class="number">0</span>, <span class="string">'rgb(255,0,0)'</span>); <span class="comment">//红 </span></span><br><span class="line">g1.addColorStop(<span class="number">0.5</span>, <span class="string">'rgb(0,255,0)'</span>);<span class="comment">//绿</span></span><br><span class="line">g1.addColorStop(<span class="number">1</span>, <span class="string">'rgb(0,0,255)'</span>); <span class="comment">//蓝</span></span><br><span class="line">		</span><br><span class="line">      <span class="comment">//可以把lg对象理解成GDI中线性brush</span></span><br><span class="line">context.fillStyle = g1;</span><br><span class="line"><span class="comment">//再用这个brush来画正方形</span></span><br><span class="line"> context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>); </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/20120822411.png" alt="image"></p>
<hr>
<h2 id="径向渐变（发散）var-rg-context-createRadialGradient-xStart-yStart-radiusStart-xEnd-yEnd-radiusEnd"><a href="#径向渐变（发散）var-rg-context-createRadialGradient-xStart-yStart-radiusStart-xEnd-yEnd-radiusEnd" class="headerlink" title="径向渐变（发散）var rg=context.createRadialGradient(xStart,yStart,radiusStart,xEnd,yEnd,radiusEnd)"></a>径向渐变（发散）var rg=context.createRadialGradient(xStart,yStart,radiusStart,xEnd,yEnd,radiusEnd)</h2><hr>
<p>径向渐变（发散）颜色rg.addColorStop(offset,color)</p>
<p>xStart:发散开始圆心x坐标</p>
<p>yStart:发散开始圆心y坐标</p>
<p>radiusStart:发散开始圆的半径</p>
<p>xEnd:发散结束圆心的x坐标</p>
<p>yEnd:发散结束圆心的y坐标</p>
<p>radiusEnd:发散结束圆的半径</p>
<p>offset:设定的颜色离渐变结束点的偏移量(0~1)</p>
<p>color:绘制时要使用的颜色</p>
<p>书本并没有给出发散偏移量的图，特地画了幅：</p>
<p><img src="http://www.uml.org.cn/html/images/20120822412.png" alt="image"></p>
<p>下面给出两个实验</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw26</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//同一个圆心画球型</span></span><br><span class="line">    <span class="comment">/*var canvas = document.getElementById(id);</span></span><br><span class="line"><span class="comment">    if (canvas == null)</span></span><br><span class="line"><span class="comment">        return false;</span></span><br><span class="line"><span class="comment">    var context = canvas.getContext('2d');</span></span><br><span class="line"><span class="comment">    var g1 = context.createRadialGradient(200, 150, 0, 200, 150, 100);</span></span><br><span class="line"><span class="comment">    g1.addColorStop(0.1, 'rgb(255,0,0)');  </span></span><br><span class="line"><span class="comment">    g1.addColorStop(1, 'rgb(50,0,0)');</span></span><br><span class="line"><span class="comment">    context.fillStyle = g1;</span></span><br><span class="line"><span class="comment">    context.beginPath();</span></span><br><span class="line"><span class="comment">    context.arc(200, 150, 100, 0, Math.PI * 2, true);</span></span><br><span class="line"><span class="comment">    context.closePath();</span></span><br><span class="line"><span class="comment">    context.fill();*/</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">//不同圆心看径向渐变模型</span></span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">    <span class="keyword">var</span> g1 = context.createRadialGradient(<span class="number">100</span>, <span class="number">150</span>, <span class="number">10</span>, <span class="number">300</span>, <span class="number">150</span>, <span class="number">50</span>);</span><br><span class="line">    g1.addColorStop(<span class="number">0.1</span>, <span class="string">'rgb(255,0,0)'</span>);</span><br><span class="line">    g1.addColorStop(<span class="number">0.5</span>, <span class="string">'rgb(0,255,0)'</span>);</span><br><span class="line">    g1.addColorStop(<span class="number">1</span>, <span class="string">'rgb(0,0,255)'</span>);</span><br><span class="line">    context.fillStyle = g1;</span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/20120822413.png" alt="image"><br><img src="http://www.uml.org.cn/html/images/20120822414.png" alt="image"></p>
<hr>
<h2 id="图形变形"><a href="#图形变形" class="headerlink" title="图形变形"></a>图形变形</h2><hr>
<p>1、平移context.translate(x,y)</p>
<p>x:坐标原点向x轴方向平移x</p>
<p>y:坐标原点向y轴方向平移y</p>
<p>2、缩放context.scale(x,y)</p>
<p>x:x坐标轴按x比例缩放</p>
<p>y:y坐标轴按y比例缩放</p>
<p>3、旋转context.rotate(angle)</p>
<p>angle:坐标轴旋转x角度（角度变化模型和画圆的模型一样）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw5</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    context.save(); <span class="comment">//保存了当前context的状态</span></span><br><span class="line">    context.fillStyle = <span class="string">"#EEEEFF"</span>;</span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line"> </span><br><span class="line">    context.fillStyle = <span class="string">"rgba(255,0,0,0.1)"</span>;</span><br><span class="line">    <span class="comment">//平移 缩放 旋转  1 2 3        </span></span><br><span class="line">    context.translate(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    context.scale(<span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line">    context.rotate(<span class="built_in">Math</span>.PI / <span class="number">4</span>);</span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    context.restore(); <span class="comment">//恢复到刚刚保存的状态,保存恢复只能使用一次</span></span><br><span class="line">    context.save(); <span class="comment">//保存了当前context的状态</span></span><br><span class="line">    context.fillStyle = <span class="string">"rgba(255,0,0,0.2)"</span>;</span><br><span class="line">    <span class="comment">//平移 旋转 缩放 1 3 2</span></span><br><span class="line">    context.translate(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    context.rotate(<span class="built_in">Math</span>.PI / <span class="number">4</span>);</span><br><span class="line">    context.scale(<span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"> </span><br><span class="line">    context.restore(); <span class="comment">//恢复到刚刚保存的状态</span></span><br><span class="line">    context.save(); <span class="comment">//保存了当前context的状态</span></span><br><span class="line">    context.fillStyle = <span class="string">"rgba(255,0,0,0.3)"</span>;</span><br><span class="line">    <span class="comment">//缩放 平移 旋转 2 1 3 </span></span><br><span class="line">    context.scale(<span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line">    context.translate(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    context.rotate(<span class="built_in">Math</span>.PI / <span class="number">4</span>);</span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"> </span><br><span class="line">    context.restore(); <span class="comment">//恢复到刚刚保存的状态</span></span><br><span class="line">    context.save(); <span class="comment">//保存了当前context的状态</span></span><br><span class="line">    context.fillStyle = <span class="string">"rgba(255,0,0,0.4)"</span>;</span><br><span class="line">    <span class="comment">//缩放 旋转 平移  2 3  1 </span></span><br><span class="line">    context.scale(<span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line">    context.rotate(<span class="built_in">Math</span>.PI / <span class="number">4</span>);</span><br><span class="line">    context.translate(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"> </span><br><span class="line">    context.restore(); <span class="comment">//恢复到刚刚保存的状态</span></span><br><span class="line">    context.save(); <span class="comment">//保存了当前context的状态</span></span><br><span class="line">    context.fillStyle = <span class="string">"rgba(255,0,0,0.5)"</span>;</span><br><span class="line">    <span class="comment">//旋转 平移 缩放  3 1 2 </span></span><br><span class="line">    context.rotate(<span class="built_in">Math</span>.PI / <span class="number">4</span>);</span><br><span class="line">    context.translate(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    context.scale(<span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"> </span><br><span class="line">    context.restore(); <span class="comment">//恢复到刚刚保存的状态</span></span><br><span class="line">    context.save(); <span class="comment">//保存了当前context的状态</span></span><br><span class="line">    context.fillStyle = <span class="string">"rgba(255,0,0,1)"</span>;</span><br><span class="line">    <span class="comment">//旋转 缩放 平移   3 2 1 </span></span><br><span class="line">    context.rotate(<span class="built_in">Math</span>.PI / <span class="number">4</span>);</span><br><span class="line">    context.scale(<span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line">    context.translate(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//实验表明应该移动的是坐标轴</span></span><br><span class="line">    <span class="comment">//实验表明缩放的是坐标轴比例</span></span><br><span class="line">    <span class="comment">//实验表明旋转的是坐标轴</span></span><br><span class="line">    <span class="comment">//综合上述，因此平移 缩放 旋转 三者的顺序不同都将画出不同的结果</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由于（平移，缩放，旋转）和（平移，旋转，缩放）一样</p>
<p>（缩放，选装，平移）和（旋转，缩放，平移）一样</p>
<p>所以实验结果只能看到“4”中情况，其实是有两种情况被覆盖了</p>
<p><img src="http://www.uml.org.cn/html/images/20120822415.png" alt="image"></p>
<p>下面给出平移，缩放，旋转先后顺序不同，坐标轴的变化图</p>
<p><img src="http://www.uml.org.cn/html/images/20120822416.png" alt="image"></p>
<hr>
<h2 id="矩阵变换-context-transform-m11-m12-m21-m22-dx-dy"><a href="#矩阵变换-context-transform-m11-m12-m21-m22-dx-dy" class="headerlink" title="矩阵变换 context.transform(m11,m12,m21,m22,dx,dy)"></a>矩阵变换 context.transform(m11,m12,m21,m22,dx,dy)</h2><hr>
<p>所谓的矩阵变换其实是context内实现平移，缩放，旋转的一种机制</p>
<p>他的主要原理就是矩阵相乘</p>
<p> 额，要讲解这个可以另开一个篇幅，庆幸的是已经有人做了总结，可以参考下面这篇文章</p>
<p><a href="http://hi.baidu.com/100912bb_bb/item/90c4a7489518b0fa1281daf1" target="_blank" rel="noopener">link</a></p>
<p>我们需要了解的是</p>
<p><code>context.translate(x,y)</code> 等同于<code>context.transform (1,0,0,1,x,y)</code>或<code>context.transform(0,1,1,0.x,y)</code></p>
<p><code>context.scale(x,y)</code>等同于<code>context.transform(x,0,0,y,0,0)</code>或<code>context.transform (0,y,x,0, 0,0)</code>;</p>
<p><code>context.rotate(θ)</code>等同于 <code>context.transform(Math.cos(θ*Math.PI/180)，Math.sin(θ*Math.PI/180), -Math.sin(θ*Math.PI/180),Math.cos(θ*Math.PI/180)，0，0）</code> 或 <code>context.transform(-Math.sin(θ*Math.PI/180),Math.cos(θ*Math.PI/180)， Math.cos(θ*Math.PI/180)，Math.sin(θ*Math.PI/180), 0，0）</code></p>
<hr>
<h2 id="图形组合-context-globalCompositeOperation-type"><a href="#图形组合-context-globalCompositeOperation-type" class="headerlink" title="图形组合 context.globalCompositeOperation=type"></a>图形组合 context.globalCompositeOperation=type</h2><hr>
<p>图形组合就是两个图形相互叠加了图形的表现形式,是后画的覆盖掉先画的呢，还是相互重叠的部分不显示等等，至于怎么显示就取决于type的值了</p>
<p>type：</p>
<p>source-over（默认值）:在原有图形上绘制新图形</p>
<p>destination-over:在原有图形下绘制新图形</p>
<p>source-in:显示原有图形和新图形的交集，新图形在上，所以颜色为新图形的颜色</p>
<p>destination-in:显示原有图形和新图形的交集，原有图形在上，所以颜色为原有图形的颜色</p>
<p>source-out:只显示新图形非交集部分</p>
<p>destination-out:只显示原有图形非交集部分</p>
<p>source-atop:显示原有图形和交集部分，新图形在上，所以交集部分的颜色为新图形的颜色</p>
<p>destination-atop:显示新图形和交集部分，新图形在下，所以交集部分的颜色为原有图形的颜色</p>
<p>lighter:原有图形和新图形都显示，交集部分做颜色叠加</p>
<p>xor:重叠飞部分不现实</p>
<p>copy:只显示新图形</p>
<p>文字看得人眼花缭乱，特意画图一张：回头一看惊觉打错字，图片的原型为圆形，你懂的- -</p>
<p><img src="http://www.uml.org.cn/html/images/20120822417.png" alt="image"></p>
<p>以下为实验代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw10</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    <span class="keyword">var</span> oprtns = <span class="keyword">new</span> <span class="built_in">Array</span>(</span><br><span class="line">    <span class="string">"source-over"</span>,</span><br><span class="line">    <span class="string">"destination-over"</span>,</span><br><span class="line">    <span class="string">"source-in"</span>,</span><br><span class="line">    <span class="string">"destination-in"</span>,</span><br><span class="line">    <span class="string">"source-out"</span>,</span><br><span class="line">    <span class="string">"destination-out"</span>,</span><br><span class="line">    <span class="string">"source-atop"</span>,</span><br><span class="line">    <span class="string">"destination-atop"</span>,</span><br><span class="line">    <span class="string">"lighter"</span>,</span><br><span class="line">    <span class="string">"xor"</span>,         </span><br><span class="line">    <span class="string">"copy"</span></span><br><span class="line">    );</span><br><span class="line">   <span class="keyword">var</span> i = <span class="number">0</span>;<span class="comment">//组合效果编号</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment">//结合setinterval动态显示组合</span></span><br><span class="line">   <span class="keyword">var</span> interal = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (i == <span class="number">10</span>) &#123;</span><br><span class="line">           i=<span class="number">0</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">else</span> &#123;</span><br><span class="line">           i++;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//蓝色矩形</span></span><br><span class="line">       context.fillStyle = <span class="string">"blue"</span>;</span><br><span class="line">       context.fillRect(<span class="number">10</span>, <span class="number">10</span>, <span class="number">60</span>, <span class="number">60</span>);</span><br><span class="line">       <span class="comment">//设置组合方式 </span></span><br><span class="line">       context.globalCompositeOperation = oprtns[i];</span><br><span class="line">       <span class="comment">//设置新图形（红色圆形）</span></span><br><span class="line">       context.beginPath();</span><br><span class="line">       context.fillStyle = <span class="string">"red"</span>;</span><br><span class="line">       context.arc(<span class="number">60</span>, <span class="number">60</span>, <span class="number">30</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">false</span>);</span><br><span class="line">       context.fill();</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果是动态的切换各种组合</p>
<p><img src="http://www.uml.org.cn/html/images/20120822418.png" alt="image"></p>
<hr>
<h2 id="给图形绘制阴影"><a href="#给图形绘制阴影" class="headerlink" title="给图形绘制阴影"></a>给图形绘制阴影</h2><hr>
<p><code>context.shadowOffsetX</code> :阴影的横向位移量（默认值为0）</p>
<p><code>context.shadowOffsetY</code> :阴影的纵向位移量（默认值为0）</p>
<p><code>context.shadowColor</code> :阴影的颜色</p>
<p><code>context.shadowBlur</code> :阴影的模糊范围（值越大越模糊）</p>
<p>先来个简单的例子</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw27</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">    context.shadowOffsetX = <span class="number">10</span>;</span><br><span class="line">    context.shadowOffsetY = <span class="number">10</span>;</span><br><span class="line">    context.shadowColor = <span class="string">'rgba(100,100,100,0.5)'</span>;</span><br><span class="line">    context.shadowBlur = <span class="number">1.5</span>;</span><br><span class="line">    context.fillStyle = <span class="string">'rgba(255,0,0,0.5)'</span>;</span><br><span class="line">    context.fillRect(<span class="number">100</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/20120822419.png" alt="image"></p>
<p>再来个书本上的五角星的例子</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create5Star</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> dx = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">var</span> dy = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">var</span> s = <span class="number">50</span>;</span><br><span class="line">    <span class="comment">//创建路径</span></span><br><span class="line">    context.beginPath();</span><br><span class="line">    context.fillStyle = <span class="string">'rgba(255,0,0,0.5)'</span>;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="built_in">Math</span>.sin(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">var</span> y = <span class="built_in">Math</span>.cos(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">var</span> dig = <span class="built_in">Math</span>.PI / <span class="number">5</span> * <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> x = <span class="built_in">Math</span>.sin(i * dig);</span><br><span class="line">        <span class="keyword">var</span> y = <span class="built_in">Math</span>.cos(i * dig);</span><br><span class="line">        context.lineTo(dx + x * s, dy + y * s);</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">    context.closePath();</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw11</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    context.fillStyle = <span class="string">"#EEEEFF"</span>;</span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line"> </span><br><span class="line">    context.shadowOffsetX = <span class="number">10</span>;</span><br><span class="line">    context.shadowOffsetY = <span class="number">10</span>;</span><br><span class="line">    context.shadowColor = <span class="string">'rgba(100,100,100,0.5)'</span>;</span><br><span class="line">    context.shadowBlur =<span class="number">5</span>;</span><br><span class="line">    <span class="comment">//图形绘制</span></span><br><span class="line">    context.translate(<span class="number">0</span>, <span class="number">50</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">        context.translate(<span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">        create5Star(context);</span><br><span class="line">        context.fill();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/20120822420.png" alt="image"></p>
<hr>
<h2 id="绘制图像"><a href="#绘制图像" class="headerlink" title="绘制图像"></a>绘制图像</h2><hr>
<p>绘图：<code>context.drawImage</code></p>
<p>图像平铺：<code>context.createPattern(image,type)</code></p>
<p>图像裁剪：<code>context.clip()</code></p>
<p>像素处理：<code>var imagedata=context.getImageData(sx,sy,sw,sh)</code></p>
<p>绘图 <code>context.drawImage</code></p>
<p><code>context.drawImage(image,x,y)</code></p>
<p><code>image:Image</code>对象<code>var img=new Image(); img.src=&quot;url(...)&quot;;</code></p>
<p>x:绘制图像的x坐标</p>
<p>y:绘制图像的y坐标</p>
<p>context.drawImage(image,x,y,w,h)</p>
<p>image:Image对象var img=new Image(); img.src=”url(…)”;</p>
<p>x:绘制图像的x坐标</p>
<p>y:绘制图像的y坐标</p>
<p>w:绘制图像的宽度</p>
<p>h:绘制图像的高度</p>
<p>context.drawImage(image,sx,sy,sw,sh,dx,dy,dw,dh):选取图像的一部分矩形区域进行绘制</p>
<p>image:Image对象var img=new Image(); img.src=”url(…)”;</p>
<p>sx：图像上的x坐标</p>
<p>sy：图像上的y坐标</p>
<p>sw：矩形区域的宽度</p>
<p>sh：矩形区域的高度</p>
<p>dx：画在canvas的x坐标</p>
<p>dy：画在canvas的y坐标</p>
<p>dw：画出来的宽度</p>
<p>dh：画出来的高度</p>
<p>最后一个方法可能比较拗，还是上图吧</p>
<p><img src="http://www.uml.org.cn/html/images/20120822421.png" alt="image"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//drawImage(image,x,y)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw28</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line"> </span><br><span class="line">    image.src = <span class="string">"Image/html5.jpg"</span>;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    context.fillStyle = <span class="string">"#EEEEFF"</span>;</span><br><span class="line"> </span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">    image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        context.drawImage(image,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//drawImage(image,x,y,w,h)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw12</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line"> </span><br><span class="line">    image.src = <span class="string">"Image/html5.jpg"</span>;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    context.fillStyle = <span class="string">"#EEEEFF"</span>;</span><br><span class="line">   </span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">    image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        context.drawImage(image, <span class="number">50</span>, <span class="number">50</span>, <span class="number">300</span>, <span class="number">200</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//drawImage(image,sx,sy,sw,sh,dx,dy,dw,dh)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw13</span>(<span class="params">id</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">    image.src = <span class="string">"Image/html5.jpg"</span>;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    context.fillStyle = <span class="string">"#EEEEFF"</span>;</span><br><span class="line">  </span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">    image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        context.drawImage(image, <span class="number">100</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">150</span>,<span class="number">50</span>,<span class="number">50</span>,<span class="number">300</span>,<span class="number">200</span>);<span class="comment">//这里取的是实际尺寸</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>三个方法的运行结果如下：</p>
<p><img src="http://www.uml.org.cn/html/images/20120822422.png" alt="image"><br><img src="http://www.uml.org.cn/html/images/20120822423.png" alt="image"><br><img src="http://www.uml.org.cn/html/images/20120822424.png" alt="image"></p>
<h3 id="图像平铺-context-createPattern-image-type"><a href="#图像平铺-context-createPattern-image-type" class="headerlink" title="图像平铺 context.createPattern(image,type)"></a>图像平铺 context.createPattern(image,type)</h3><p>type:</p>
<p>no-repeat:不平铺</p>
<p>repeat-x:横方向平铺</p>
<p>repeat-y:纵方向平铺</p>
<p>repeat:全方向平铺</p>
<p>类似图形组合，给出动态的切换平铺类型代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw14</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//传统的平铺是用for循环来处理的，现在直接调用接口</span></span><br><span class="line">    <span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    <span class="keyword">var</span> type = [<span class="string">"no-repeat"</span>, <span class="string">"repeat-x"</span>, <span class="string">"repeat-y"</span>, <span class="string">"repeat"</span>];</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">    image.src = <span class="string">"Image/wordslogo.jpg"</span>;</span><br><span class="line">    image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> interval = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">//每次转换平铺类型清空</span></span><br><span class="line">            context.clearRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= <span class="number">4</span>) &#123;</span><br><span class="line">                i = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">var</span> ptrn = context.createPattern(image, type[i]);</span><br><span class="line">            context.fillStyle = ptrn;</span><br><span class="line">            context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/20120822425.png" alt="image"></p>
<h3 id="图像裁剪：context-clip"><a href="#图像裁剪：context-clip" class="headerlink" title="图像裁剪：context.clip()"></a>图像裁剪：context.clip()</h3><p>context.clip()只绘制封闭路径区域内的图像，不绘制路径外部图像，用的时候</p>
<p>先创建裁剪区域</p>
<p>再绘制图像（之后绘制的图形都会采用这个裁剪区域，要取消这个裁剪区域就需要用到保存恢复状态，下面有讲）</p>
<p>给出圆形和星形的裁剪代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//图像裁剪</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw15</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    context.fillStyle = <span class="string">"black"</span>;</span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">    image = <span class="keyword">new</span> Image();</span><br><span class="line">    image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        drawImg(context,image);</span><br><span class="line">    &#125;</span><br><span class="line">    image.src = <span class="string">"Image/html5.jpg"</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawImg</span>(<span class="params">context, image</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//圆形裁剪区</span></span><br><span class="line">    <span class="comment">//createCircleClip(context)</span></span><br><span class="line">    <span class="comment">//星形裁剪区</span></span><br><span class="line">    create5StarClip(context);</span><br><span class="line">    context.drawImage(image,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createCircleClip</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">    context.beginPath();</span><br><span class="line">    context.arc(<span class="number">200</span>, <span class="number">150</span>, <span class="number">100</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">    context.closePath();</span><br><span class="line">    context.clip();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create5StarClip</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> dx = <span class="number">200</span>;</span><br><span class="line">    <span class="keyword">var</span> dy = <span class="number">135</span>;</span><br><span class="line">    <span class="keyword">var</span> s = <span class="number">150</span>;</span><br><span class="line">    context.beginPath();</span><br><span class="line">    <span class="keyword">var</span> x = <span class="built_in">Math</span>.sin(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">var</span> y = <span class="built_in">Math</span>.cos(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">var</span> dig = <span class="built_in">Math</span>.PI / <span class="number">5</span> * <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> x = <span class="built_in">Math</span>.sin(i * dig);</span><br><span class="line">        <span class="keyword">var</span> y = <span class="built_in">Math</span>.cos(i * dig);</span><br><span class="line">        context.lineTo(dx + x * s, dy + y * s);</span><br><span class="line">    &#125;</span><br><span class="line">    context.closePath();</span><br><span class="line">    context.clip();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/20120822426.png" alt="image"><br><img src="http://www.uml.org.cn/html/images/20120822427.png" alt="image"></p>
<h3 id="像素处理："><a href="#像素处理：" class="headerlink" title="像素处理："></a>像素处理：</h3><p>获取像素颜色数组： var imagedata=context.getImageData(sx,sy,sw,sh)</p>
<p>sx:cavas的x轴坐标点</p>
<p>sy:canvas的y轴坐标点</p>
<p>sw:距离x的宽度</p>
<p>sh:距离y的高度</p>
<p>可以利用context.getImageData返回的一个像素颜色数组，顺序是所取像素范围的从左到右，从上到下，数组的元素是（所有图形，包括图片，和绘制的图形）每个像素的rgba</p>
<p>[r1,g1,b1,a1,r2,g2,b2,a2…]</p>
<p>设置像素颜色：context.putImageData(imagedata,dx,dy,dirtyX,dirtyY,dirtyWidth,dirtyHeight) </p>
<p>对imagedata数组中的各个像素的r、g、b、a值进行修改，再调用putImageData方法进行绘制</p>
<p>imagedata:修改后的imagedata</p>
<p>dx:重绘图像的起点横坐标（重绘的起点和原来的图像一致的话就会把原来的图形覆盖掉，看起来就像是原来的图像变成现在的图像一样）</p>
<p>dy:重绘图像的起点纵坐标</p>
<p>//以下可选参数，设置重绘的矩形范围，如果缺省，默认会重绘所有的imegedata</p>
<p>dirtyX:矩形左上角x轴坐标</p>
<p>dirtyY:矩形左上角y轴坐标</p>
<p>dirtyWidth:矩形长度</p>
<p>dirtyHeight:矩形高度</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw16</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    context.fillStyle = <span class="string">'red'</span></span><br><span class="line">    <span class="comment">//在右下角画一个正方形</span></span><br><span class="line">    context.fillRect(<span class="number">250</span>,<span class="number">250</span>,<span class="number">150</span>,<span class="number">50</span>);</span><br><span class="line">    <span class="keyword">var</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">    image.src = <span class="string">"Image/html5.jpg"</span>;</span><br><span class="line"> </span><br><span class="line">    image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//在左上角画一幅图片</span></span><br><span class="line">        context.drawImage(image, <span class="number">0</span>, <span class="number">0</span>,<span class="number">200</span>,<span class="number">200</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//实验证明imagedata取的是canvas所在范围画的图形，不止是图片</span></span><br><span class="line">        <span class="comment">//不会取该区域内是空白的canvas的像素</span></span><br><span class="line">        <span class="keyword">var</span> imagedata = context.getImageData(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//修改imagedata</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, n = imagedata.data.length; i &lt; n; i += <span class="number">4</span>) &#123;</span><br><span class="line">  </span><br><span class="line">            imagedata.data[i + <span class="number">0</span>] = <span class="number">255</span> - imagedata.data[i + <span class="number">0</span>]; <span class="comment">//red;</span></span><br><span class="line">            imagedata.data[i + <span class="number">1</span>] = <span class="number">255</span> - imagedata.data[i + <span class="number">1</span>]; <span class="comment">//green</span></span><br><span class="line">            imagedata.data[i + <span class="number">2</span>] = <span class="number">255</span> - imagedata.data[i + <span class="number">2</span>]; <span class="comment">//blue</span></span><br><span class="line">            <span class="comment">//imagedata.data[i + 3] = 255 - imagedata.data[i + 3]; //a</span></span><br><span class="line">        &#125;</span><br><span class="line">        context.putImageData(imagedata, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/20120822428.png" alt="image"></p>
<hr>
<h2 id="绘制文字"><a href="#绘制文字" class="headerlink" title="绘制文字"></a>绘制文字</h2><hr>
<p>填充文字：context.fillText(text,x,y) </p>
<p>绘制文字轮廓 context.strokeText(text,x,y)</p>
<p>text:要绘制的文字</p>
<p>x:文字起点的x坐标轴</p>
<p>y:文字起点的y坐标轴</p>
<p>context.font:设置字体样式</p>
<p>context.textAlign:水平对齐方式</p>
<p>start、end、right、center</p>
<p>context.textBaseline:垂直对齐方式</p>
<p>top、hanging、middle、alphabetic、ideographic、bottom</p>
<p>var length=context.measureText(text):计算字体长度(px)那么能不能计算高度啊，很遗憾，不能 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw17</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">    context.fillStyle = <span class="string">"#EEEEFF"</span>;</span><br><span class="line">    context.fillRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">400</span>,<span class="number">300</span>);</span><br><span class="line">    context.fillStyle = <span class="string">"#00f"</span>;</span><br><span class="line">    context.font = <span class="string">"italic 30px sans-serif"</span>;</span><br><span class="line">    context.textBaseline = <span class="string">'top'</span>;</span><br><span class="line">    <span class="comment">//填充字符串</span></span><br><span class="line">    <span class="keyword">var</span> txt=<span class="string">"fill示例文字"</span></span><br><span class="line">    context.fillText(txt, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">var</span> length=context.measureText(txt);</span><br><span class="line">    context.fillText(<span class="string">"长"</span> + length.width + <span class="string">"px"</span>, <span class="number">0</span>, <span class="number">50</span>);</span><br><span class="line">    context.font = <span class="string">"bolid 30px sans-serif"</span>;</span><br><span class="line">    txt = <span class="string">"stroke示例文字"</span>;</span><br><span class="line">    length = context.measureText(txt);</span><br><span class="line">    context.strokeText(txt,<span class="number">0</span>,<span class="number">100</span>);</span><br><span class="line">    context.fillText(<span class="string">"长"</span> + length.width + <span class="string">"px"</span>, <span class="number">0</span>, <span class="number">150</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/20120822429.png" alt="image"></p>
<hr>
<h2 id="保存和恢复状态"><a href="#保存和恢复状态" class="headerlink" title="保存和恢复状态"></a>保存和恢复状态</h2><hr>
<p>保存：context.save()</p>
<p>恢复：context.restore()</p>
<p>在上面的裁剪图片提过，一旦设定了裁剪区域，后来绘制的图形都只显示裁剪区域内的内容，要“取消”这个裁剪区域才能正常绘制其他图形，其实这个“取消”是利用save（）方法和restore（）方法来实现的。</p>
<p>context.save()：调用该方法，会保存当前context的状态、属性（把他理解成游戏存档）</p>
<p>context.restore():调用该方法就能恢复到save时候context的状态、属性（游戏回档）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw18</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">     <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">     <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">     context.fillStyle = <span class="string">"red"</span>;</span><br><span class="line">     context.save(); <span class="comment">//保存了当前context的状态</span></span><br><span class="line">     context.fillStyle = <span class="string">"black"</span>;</span><br><span class="line">     context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">     context.restore();<span class="comment">//恢复到刚刚保存的状态</span></span><br><span class="line">     context.fillRect(<span class="number">0</span>,<span class="number">120</span>,<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/20120822430.png" alt="image"> </p>
<hr>
<h2 id="保存文件-canvas-toDataURL-MIME"><a href="#保存文件-canvas-toDataURL-MIME" class="headerlink" title="保存文件 canvas.toDataURL(MIME)"></a>保存文件 canvas.toDataURL(MIME)</h2><hr>
<p>在canvas中绘出的图片只是canvas标签而已，并非是真正的图片，是不能右键，另存为的，我们可以利用canvas.toDataURL()这个方法把canvas绘制的图形生成一幅图片，生成图片后，就能对图片进行相应的操作了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">draw19</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">     <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">     <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">     context.fillStyle = <span class="string">"rgb(0,0,225)"</span>;</span><br><span class="line">     context.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</span><br><span class="line">     context.fillStyle = <span class="string">"rgb(255,255,0)"</span>;</span><br><span class="line">     context.fillRect(<span class="number">10</span>, <span class="number">20</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">     <span class="comment">//把图像保存到新的窗口</span></span><br><span class="line">     <span class="keyword">var</span> w=<span class="built_in">window</span>.open(canvas.toDataURL(<span class="string">"image/jpeg"</span>),<span class="string">"smallwin"</span>,<span class="string">"width=400,height=350"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/20120822431.png" alt="image"></p>
<hr>
<h2 id="结合setInterval制作动画"><a href="#结合setInterval制作动画" class="headerlink" title="结合setInterval制作动画"></a>结合setInterval制作动画</h2><hr>
<p>基本原理就是定时清除整个canvas重新绘制，下面给出“我弹、我弹、我弹弹弹”的代码 （额、名字而已）</p>
<p>小矩形在矩形区域移动，碰到矩形区域的边缘反弹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw20</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="keyword">if</span> (canvas == <span class="literal">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">var</span> interal = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        move(context);</span><br><span class="line">    &#125;, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> x = <span class="number">100</span>;<span class="comment">//矩形开始坐标</span></span><br><span class="line"><span class="keyword">var</span> y = <span class="number">100</span>;<span class="comment">//矩形结束坐标</span></span><br><span class="line"><span class="keyword">var</span> mx = <span class="number">0</span>;<span class="comment">//0右1左</span></span><br><span class="line"><span class="keyword">var</span> my = <span class="number">0</span>; <span class="comment">//0下1上</span></span><br><span class="line"><span class="keyword">var</span> ml = <span class="number">1</span>;<span class="comment">//每次移动长度</span></span><br><span class="line"><span class="keyword">var</span> w = <span class="number">20</span>;<span class="comment">//矩形宽度</span></span><br><span class="line"><span class="keyword">var</span> h = <span class="number">20</span>;<span class="comment">//矩形高度</span></span><br><span class="line"><span class="keyword">var</span> cw = <span class="number">400</span>;<span class="comment">//canvas宽度</span></span><br><span class="line"><span class="keyword">var</span> ch = <span class="number">300</span>; <span class="comment">//canvas高度</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">    context.clearRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">    context.fillStyle = <span class="string">"#EEEEFF"</span>;</span><br><span class="line">    context.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line">    context.fillStyle = <span class="string">"red"</span>;</span><br><span class="line">    context.fillRect(x, y, w, h);       </span><br><span class="line">    <span class="keyword">if</span> (mx == <span class="number">0</span>) &#123;</span><br><span class="line">        x = x + ml;</span><br><span class="line">        <span class="keyword">if</span> (x &gt;= cw-w) &#123;</span><br><span class="line">            mx = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        x = x - ml;</span><br><span class="line">        <span class="keyword">if</span> (x &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            mx = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (my == <span class="number">0</span>) &#123;</span><br><span class="line">        y = y + ml;</span><br><span class="line">        <span class="keyword">if</span> (y &gt;= ch-h) &#123;</span><br><span class="line">            my = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        y = y - ml;</span><br><span class="line">        <span class="keyword">if</span> (y &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            my = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.uml.org.cn/html/images/20120822432.png" alt="image"></p>
<hr>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><hr>
<p>历时一天半，本来以为可以玩转的，写下来才发现要玩转canvas还需要很多的实践，这个道理应该是适用所有的技术的，做人啊，就得谦虚点。本文如有错误，请及时留言给我纠正，希望能给正在学canvas绘图的童鞋有所帮助。</p>
<p>注：本文转载至<a href="http://www.uml.org.cn/html/201208224.asp" target="_blank" rel="noopener">TimeLangoliers</a>,如要转载请标明出处！</p>

      
      
        <div class="page-reward">
          <p><a href="javascript:void(0)" onclick="dashangToggle()" class="dashang" title="打赏，支持一下">赏</a></p>
          <div class="hide_box"></div>
          <div class="shang_box">
            <a class="shang_close" href="javascript:void(0)" onclick="dashangToggle()" title="关闭">×</a>
            <div class="shang_tit">
              <p>纯属好玩</p>
            </div>
            <div class="shang_payimg">
              <img src="/img/alipayimg.jpg" alt="扫码支持" title="扫一扫">
            </div>
              <div class="pay_explain">扫码打赏，你说多少就多少</div>
            <div class="shang_payselect">
              
                <div class="pay_item checked" data-id="alipay">
                  <span class="radiobox"></span>
                  <span class="pay_logo"><img src="/img/alipay.png" alt="支付宝"></span>
                </div>
              
              
                <div class="pay_item" data-id="wechat">
                  <span class="radiobox"></span>
                  <span class="pay_logo"><img src="/img/weixin.png" alt="微信"></span>
                </div>
              
            </div>
            <div class="shang_info">
              <p>打开<span id="shang_pay_txt">支付宝</span>扫一扫，即可进行扫码打赏哦</p>
            </div>
          </div>
        </div>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js"></script>
        <script type="text/javascript">
          $(".pay_item").click(function(){
            $(this).addClass('checked').siblings('.pay_item').removeClass('checked');
            var dataid=$(this).attr('data-id');
            $(".shang_payimg img").attr("src","/img/"+dataid+"img.jpg");
            $("#shang_pay_txt").text(dataid=="alipay"?"支付宝":"微信");
          });
          function dashangToggle(){
            $(".hide_box").fadeToggle();
            $(".shang_box").fadeToggle();
          }
        </script>
      
    </div>
    
  </div>
  
    


<nav id="article-nav">
  
    <a href="/2015/07/20/页面的缓存与不缓存设置/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          页面的缓存与不缓存设置
        
      </div>
    </a>
  
  
    <a href="/2015/01/15/Javascript闭包/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Javascript闭包——懂不懂由你，反正我是懂了</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#基本知识"><span class="toc-number">1.</span> <span class="toc-text">基本知识</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#绘制矩形-context-fillRect-x-y-width-height-strokeRect-x-y-width-height"><span class="toc-number">2.</span> <span class="toc-text">绘制矩形 context.fillRect(x,y,width,height) strokeRect(x,y,width,height)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#清除矩形区域-context-clearRect-x-y-width-height"><span class="toc-number">3.</span> <span class="toc-text">清除矩形区域 context.clearRect(x,y,width,height)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#圆弧context-arc-x-y-radius-starAngle-endAngle-anticlockwise"><span class="toc-number">4.</span> <span class="toc-text">圆弧context.arc(x, y, radius, starAngle,endAngle, anticlockwise)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#路径-context-beginPath-context-closePath"><span class="toc-number">5.</span> <span class="toc-text">路径 context.beginPath() context.closePath()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#绘制线段-context-moveTo-x-y-context-lineTo-x-y"><span class="toc-number">6.</span> <span class="toc-text">绘制线段 context.moveTo(x,y) context.lineTo(x,y)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#绘制贝塞尔曲线（贝济埃、bezier）-context-bezierCurveTo-cp1x-cp1y-cp2x-cp2y-x-y"><span class="toc-number">7.</span> <span class="toc-text">绘制贝塞尔曲线（贝济埃、bezier） context.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#线性渐变-var-lg-context-createLinearGradient-xStart-yStart-xEnd-yEnd"><span class="toc-number">8.</span> <span class="toc-text">线性渐变 var lg= context.createLinearGradient(xStart,yStart,xEnd,yEnd)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#径向渐变（发散）var-rg-context-createRadialGradient-xStart-yStart-radiusStart-xEnd-yEnd-radiusEnd"><span class="toc-number">9.</span> <span class="toc-text">径向渐变（发散）var rg=context.createRadialGradient(xStart,yStart,radiusStart,xEnd,yEnd,radiusEnd)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#图形变形"><span class="toc-number">10.</span> <span class="toc-text">图形变形</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#矩阵变换-context-transform-m11-m12-m21-m22-dx-dy"><span class="toc-number">11.</span> <span class="toc-text">矩阵变换 context.transform(m11,m12,m21,m22,dx,dy)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#图形组合-context-globalCompositeOperation-type"><span class="toc-number">12.</span> <span class="toc-text">图形组合 context.globalCompositeOperation=type</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#给图形绘制阴影"><span class="toc-number">13.</span> <span class="toc-text">给图形绘制阴影</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#绘制图像"><span class="toc-number">14.</span> <span class="toc-text">绘制图像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#图像平铺-context-createPattern-image-type"><span class="toc-number">14.1.</span> <span class="toc-text">图像平铺 context.createPattern(image,type)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#图像裁剪：context-clip"><span class="toc-number">14.2.</span> <span class="toc-text">图像裁剪：context.clip()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#像素处理："><span class="toc-number">14.3.</span> <span class="toc-text">像素处理：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#绘制文字"><span class="toc-number">15.</span> <span class="toc-text">绘制文字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#保存和恢复状态"><span class="toc-number">16.</span> <span class="toc-text">保存和恢复状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#保存文件-canvas-toDataURL-MIME"><span class="toc-number">17.</span> <span class="toc-text">保存文件 canvas.toDataURL(MIME)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结合setInterval制作动画"><span class="toc-number">18.</span> <span class="toc-text">结合setInterval制作动画</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结语"><span class="toc-number">19.</span> <span class="toc-text">结语</span></a></li></ol>
</div>
<input type="button" id="tocButton" value="隐藏目录" title="点击按钮隐藏或者显示文章目录">

<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script>
    var valueHide = "隐藏目录";
    var valueShow = "显示目录";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }
    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
        }
    })
    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
    }
</script>


    <style>
        .toc {
            white-space: nowrap;
            overflow-x: hidden;
        }
    </style>

    <script>
        $(document).ready(function() {
            $(".toc li a").mouseover(function() {
                var title = $(this).attr('href');
                $(this).attr("title", title);
            });
        })
    </script>




<div class="bdsharebuttonbox">
	<a href="#" class="fx fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
	<a href="#" class="fx fa-weixin bds_weixin" data-cmd="weixin" title="分享到微信"></a>
	<a href="#" class="fx fa-qq bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
	<a href="#" class="fx fa-facebook-official bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
	<a href="#" class="fx fa-twitter bds_twi" data-cmd="twi" title="分享到Twitter"></a>
	<a href="#" class="fx fa-linkedin bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a>
	<a href="#" class="fx fa-files-o bds_copy" data-cmd="copy" title="分享到复制网址"></a>
</div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>




    
        <!--PC版-->
<!--<div id="SOHUCS"></div>
<script charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/changyan.js" ></script>
<script type="text/javascript">
window.changyan.api.config({
appid: 'cytayTXt6',
conf: 'prod_f098476580050875f23405f8b1a1825e'
});
</script>-->

 <!-- 	PC和WAP自适应版
 		微信登录版	 -->
<div id="SOHUCS" class="souhuCom"></div> 
<script type="text/javascript"> 
(function(){ 
var appid = 'cytayTXt6'; 
var conf = 'prod_f098476580050875f23405f8b1a1825e'; 
var width = window.innerWidth || document.documentElement.clientWidth; 
if (width < 960) { 
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>

 <!-- 	PC和WAP自适应版
 		151手机版	 -->
<!--div id="SOHUCS" class="souhuCom"></div> 
<script type="text/javascript"> 
(function(){ 
var appid = 'cysW4S5aP'; 
var conf = 'prod_87ceb709692fc0144865b09c877708b8'; 
var width = window.innerWidth || document.documentElement.clientWidth; 
if (width < 960) { 
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>
-->
    



    <div class="scroll" id="post-nav-button">
        
            <a href="/2015/07/20/页面的缓存与不缓存设置/" title="上一篇: 页面的缓存与不缓存设置">
                <i class="fa fa-angle-left"></i>
            </a>
        
        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>
        
            <a href="/2015/01/15/Javascript闭包/" title="下一篇: Javascript闭包——懂不懂由你，反正我是懂了">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>
    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/01/17/前端静态资源版本更新与缓存之——通过gulp 在原html文件上自动化添加js、css版本号/">前端静态资源版本更新与缓存之——通过gulp 在原html文件上自动化添加js、css版本号</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/15/前端静态资源代码混淆——通过gulp 自动化混淆js、css或合并js、css/">前端静态资源代码混淆——通过gulp 自动化混淆js、css或合并js、css</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/01/SpringBoot+SpringMVC+MybatisPlus框架整合练习之【美女图片】爬虫---图文详细流程/">SpringBoot+SpringMVC+MybatisPlus框架整合练习之【美女图片】爬虫---图文详细流程</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/25/在HTML5中如何提高网站前端性能/">在HTML5中如何提高网站前端性能</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/07/即时通讯框架T-io之WebSocket协议再之HelloWorld/">即时通讯框架T-io之WebSocket协议再之HelloWorld</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/06/Java后端Tomcat实现WebSocket实例教程/">Java后端Tomcat实现WebSocket实例教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/25/JQuery学习总结/">JQuery学习总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/07/各大浏览器 CSS3 和 HTML5 兼容速查表/">各大浏览器 CSS3 和 HTML5 兼容速查表</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/25/a标签中href属性动作和onclick事件的区别以及传递this参数对象/"><a>标签中href属性动作和onclick事件的区别以及传递this参数对象</a></a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/22/页面预加载loading动画，再载入内容/">页面预加载loading动画，再载入内容</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/02/java技术——邮件的发送/">java技术——邮件的发送</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/25/web前后台数据交互的几种方式/">web前后台数据交互的几种方式</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/25/JS设置cookie、读取cookie、删除cookie/">JS设置cookie、读取cookie、删除cookie</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/20/jQuery.fn的作用是什么/">jQuery.fn的作用是什么</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/07/通过Ajax使用FormData对象无刷新上传文件/">通过Ajax使用FormData对象无刷新上传文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/07/div里面的内容超出自身高度时，显示省略号/">div里面的内容超出自身高度时，显示省略号</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/07/JS-碰撞检测/">JS-碰撞检测</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/07/jQuery.ajax() 函数详解/">jQuery.ajax() 函数详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/20/页面的缓存与不缓存设置/">页面的缓存与不缓存设置</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/02/25/玩转html5 的 canvas画图/">玩转html5 的 canvas画图</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/01/15/Javascript闭包/">Javascript闭包——懂不懂由你，反正我是懂了</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/12/25/免费个人博客搭建/">免费个人博客搭建教程（详细-图文）--Hexo+OSChina</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/01/07/HTMl5的sessionStorage和localStorage/">HTML5本地存储之Web Storage</a></li></ul>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
            }
        })
    </script>



    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2019 韩斌
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank"></a><a href="http://bio.soos.xin" target="_blank"> Aaron </a>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style="display:none">
                        <span id="site-visit">本站访客数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style="display:none">
                        <span id="page-visit">本文阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


    <script type="text/javascript">
      window.onload = function(){
        document.getElementById("search").onclick = function(){
            console.log("search")
            search();
        }
      }
      function search(){
        (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
        (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
        e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
        })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

        _st('install','A1Pz-LKMXbrzcFg2FWi6','2.0.0');
      }
    </script>

  </div>
</body>
</html>